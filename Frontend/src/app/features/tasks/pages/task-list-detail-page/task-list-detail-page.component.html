<div class="container mt-4">
  <button class="btn btn-secondary mb-3" (click)="goBack()">
    ‚Üê Back to Task Lists
  </button>

  <div *ngIf="taskList">
    <h2 class="mb-3">{{ taskList.title }}</h2>
    <p>{{ taskList.description }}</p>

    <div class="progress mb-3">
      <div
        class="progress-bar"
        role="progressbar"
        [style.width.%]="taskList.progress"
        [attr.aria-valuenow]="taskList.progress"
        aria-valuemin="0"
        aria-valuemax="100"
      >
        {{ taskList.progress }}%
      </div>
    </div>

    <div class="d-flex justify-content-end mb-3">
      <button class="btn btn-primary" (click)="toggleCreateForm()">
        {{ showCreateForm ? "Cancel" : "Create Task" }}
      </button>
    </div>

    <app-create-task-form
      *ngIf="showCreateForm"
      (submitTask)="onCreateTask($event)"
      (cancel)="toggleCreateForm()"
    ></app-create-task-form>

    <div *ngIf="tasks.length === 0 && !showCreateForm" class="text-center text-muted">
      No tasks available.
    </div>
    <table *ngIf="tasks.length > 0 && !showCreateForm" class="table table-bordered mt-3">
      <thead class="table-light">
        <tr>
          <th>Done</th>
          <th>Title</th>
          <th>Description</th>
          <th>Due Date</th>
          <th>Priority</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let task of tasks">
          <td>
            <input
              type="checkbox"
              [checked]="task.status === 'COMPLETED'"
              disabled
            />
          </td>
          <td>{{ task.title }}</td>
          <td>{{ task.description }}</td>
          <td>{{ task.dueDate | date : "mediumDate" }}</td>
          <td>{{ task.priority }}</td>
          <td>
            <button class="btn btn-sm btn-outline-secondary me-1">Edit</button>
            <button class="btn btn-sm btn-outline-danger">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="!taskList && !showCreateForm" class="alert alert-danger">Task list not found.</div>
</div>
